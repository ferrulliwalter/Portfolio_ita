<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio – Walter</title>
  <meta name="description" content="Portfolio progetti – sito vetrina one‑page senza menu." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b120e; --fg:#f4f8f5; --muted:#a8bfb1; --card:#122019; --accent:#2fb369;
      --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; background:var(--bg); color:var(--fg); font-family:'Open Sans', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;}
    a{color:inherit}
    .wrap{max-width:1100px; margin:0 auto; padding:28px;}
    header{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:32px 0;}
    .id{display:flex; gap:18px; align-items:center}
    .avatar{width:64px; height:64px; border-radius:50%; object-fit:cover; box-shadow:0 4px 16px rgba(0,0,0,.25);} 
    h1{font-size:32px; line-height:1.1; margin:0}
    .sub{color:var(--muted); margin-top:6px; font-size:15px}
    .cta{display:flex; gap:10px; flex-wrap:wrap}
    .btn{appearance:none; border:none; padding:12px 16px; border-radius:12px; background:var(--accent); color:white; font-weight:600; cursor:pointer; box-shadow:var(--shadow)}
    .btn.ghost{background:transparent; border:1px solid #2a2f39; color:var(--fg)}

    .hero{background:linear-gradient(135deg, rgba(47,179,105,.15), transparent 60%); padding:26px; border-radius:var(--radius); box-shadow:var(--shadow)}

    .controls{display:flex; gap:12px; align-items:center; justify-content:flex-end; margin:18px 0}
    .toggle{background:#1a1f27; padding:6px; border-radius:99px; display:flex; gap:6px}
    .toggle button{padding:8px 12px; border-radius:99px; border:none; background:transparent; color:var(--muted); cursor:pointer}
    .toggle button.active{background:var(--accent); color:white}

    /* Mosaic grid */
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:560px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card); border-radius:16px; overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .card img{width:100%; aspect-ratio:16/10; object-fit:cover}
    .card .body{padding:14px}
    .card h3{margin:0 0 6px; font-size:18px}
    .meta{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
    .tag{font-size:12px; color:#d2d7e0; background:#242a34; padding:6px 8px; border-radius:999px}

    /* Slide viewer */
    .slides{display:none; position:relative; background:var(--card); border-radius:16px; overflow:hidden; box-shadow:var(--shadow)}
    .slides.active{display:block}
    .slide-img{width:100%; height:520px; object-fit:cover; display:block}
    .slide-info{display:flex; justify-content:space-between; align-items:center; padding:12px 14px}
    .nav{position:absolute; top:50%; transform:translateY(-50%); width:100%; display:flex; justify-content:space-between; padding:0 8px}
    .nav button{border:none; width:44px; height:44px; border-radius:50%; background:rgba(0,0,0,.35); color:#fff; font-size:18px; cursor:pointer}

    footer{color:var(--muted); text-align:center; padding:36px 0}
    .links{display:flex; gap:12px; justify-content:center; flex-wrap:wrap}

    /* Lightbox */
    .lightbox{position:fixed; inset:0; background:rgba(0,0,0,.75); display:none; align-items:center; justify-content:center; padding:20px;}
    .lightbox.open{display:flex}
    .lightbox img{max-width:90vw; max-height:80vh; border-radius:16px; box-shadow:var(--shadow)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="id">
        <img class="avatar" src="image_1.jpg" alt="Foto di Walter" />
        <div>
          <h1>Walter – Portfolio</h1>
          <div class="sub">Una selezione dei miei lavori</div>
        </div>
      </div>
      <div class="cta">
        <a class="btn ghost" href="#" target="_blank" rel="noopener">Scarica CV</a>
        <button class="btn" id="contactBtn" aria-haspopup="dialog">Contatti</button>
      </div>
    </header>

    <section class="hero" aria-label="Progetti">
      <div class="controls">
        <div class="toggle" role="tablist" aria-label="Vista galleria">
          <button id="mosaicBtn" role="tab" aria-selected="true" class="active">Mosaico</button>
          <button id="slideBtn" role="tab" aria-selected="false">Slideshow</button>
        </div>
      </div>

      <!-- MOSAICO -->
      <div id="mosaic" class="grid" aria-live="polite"></div>

      <!-- SLIDESHOW -->
      <div id="slides" class="slides" aria-live="polite" aria-label="Slideshow progetti">
        <img id="slideImage" class="slide-img" alt="Anteprima progetto" src="" />
        <div class="nav" aria-hidden="false">
          <button id="prev" aria-label="Progetto precedente">◀</button>
          <button id="next" aria-label="Progetto successivo">▶</button>
        </div>
        <div class="slide-info">
          <div>
            <strong id="slideTitle">Titolo</strong>
            <div id="slideDesc" style="color:var(--muted); font-size:14px"></div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div>© <span id="year"></span> Walter. Tutti i diritti riservati.</div>
      <div class="links" aria-label="Link social">
        <a href="mailto:ferrulli.walter@gmail.com">ferrulli.walter@gmail.com</a>
        <span>·</span>
        <a href="https://www.linkedin.com/in/walter-ferrulli/" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </footer>
  </div>

  <!-- Lightbox per il mosaico -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Anteprima immagine">
    <img id="lightImg" alt="Anteprima" src="" />
  </div>

  <script>
    // ======= DATI PROGETTI =======
    // desc: 2 righe per mosaico; full: testo completo (ITA) per slideshow
    const projects = [
      {
        title: "Customer Data Platform – Produttore di fragranze tedesco",
        desc: "Implementazione end‑to‑end di una CDP integrando fonti B2B/B2C online e offline. Creato data hub cross‑brand/paese e BI proprietaria.",
        full: "Ho guidato l'implementazione end‑to‑end di una Customer Data Platform per un primario produttore tedesco di fragranze. Il progetto ha integrato fonti dati eterogenee (vendite B2B e B2C online/offline e analytics comportamentali) in un unico data hub cross‑brand e cross‑country, con sistema di Business Intelligence proprietario. L'architettura ha abilitato use case strategici come Marketing Mix Modeling, recupero carrelli abbandonati e algoritmi di Next Best Action, migliorando le decisioni data‑driven, l'efficienza marketing e l'engagement su tutti i canali.",
        image: "image_2.png",
        link: "#",
        tags: ["CDP", "Data Hub", "BI", "MMM/NBA", "Customer Analytics"]
      },
      {
        title: "Geointelligence – Brand automotive globale",
        desc: "Suite GeoIntelligence per governance rete multi‑brand/paese: analisi copertura, benchmark performance, simulazioni greenfield e scenario.",
        full: "Ho progettato e implementato una soluzione avanzata di Geointelligence per ottimizzare la governance della rete di un gruppo automotive globale multi‑brand e multi‑paese. L'iniziativa ha integrato una suite leader di mercato per abilitare analisi di copertura, benchmark di performance e location intelligence. Sono stati integrati KPI real‑time, analisi competitor e simulazioni greenfield/scenario. La data strategy ha garantito ingestion, processing e visualizzazione consistenti tra regioni, combinando dati interni e di terze parti. Il risultato: decisioni più rapide e consapevoli su footprint, gap di copertura e priorità d'investimento.",
        image: "image_3.png",
        link: "#",
        tags: ["GeoIntelligence", "Network Planning", "KPIs", "Location Intelligence"]
      },
      {
        title: "E‑commerce Full Potential – Leader globale nel settore eyewear",
        desc: "Program management e‑commerce su Shopify: SEO, integrazioni tecniche, Shopify Payments, espansioni regionali e automazioni marketing.",
        full: "Ho guidato per due anni un programma di potenziamento e‑commerce per un leader globale dell'eyewear. Mi sono occupato della gestione quotidiana delle operation, del miglioramento SEO e del coordinamento delle principali integrazioni tecniche su Shopify. Tra i risultati: attivazione di Shopify Payments, supporto a espansioni regionali e ottimizzazione delle automazioni di marketing. L'iniziativa ha snellito i processi, aumentato la visibilità organica e migliorato gli indicatori di vendita, in linea con i target di ricavo.",
        image: "https://images.unsplash.com/photo-1512295767273-ac109ac3acfa?q=80&w=1600&auto=format&fit=crop",
        link: "#",
        tags: ["E‑commerce", "Shopify", "SEO", "Marketing Automation"]
      },
      {
        title: "CRM & Loyalty – Brand globale nel settore Fashion e Retail",
        desc: "Definizione loyalty (naming, livelli, meccaniche) con business case. Integrazione real‑time POS, analytics e journey automation.",
        full: "Ho definito e implementato un programma CRM & Loyalty per un brand fashion globale: dalla strategia (naming, meccaniche, livelli, punti e reward) al business case per ROI e sostenibilità. Ho coordinato team Data & Analytics e IT per integrare logiche real‑time tra loyalty engine e sistemi cassa in negozio, abilitando segmentazioni in tempo reale. Ho implementato analytics avanzati, workflow di marketing automation e journey ottimizzati, favorendo il passaggio da un approccio transazionale a uno relazionale, con crescita della loyalty e impatto sul business.",
        image: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop",
        link: "#",
        tags: ["CRM", "Loyalty", "Customer Journeys", "Real‑time POS"]
      },
      {
        title: "Ecosistema Influencer Marketing – Brand globale nel settore caffè",
        desc: "Ecosistema influencer integrato con CRM/MA/e‑commerce, governance HQ‑local, processi scalabili e framework budget/roll‑out.",
        full: "Ho disegnato e implementato un ecosistema di Influencer Marketing per un produttore di macchine da caffè, integrato con CRM, marketing automation ed e‑commerce per semplificare le collaborazioni global/local. Ho definito governance e ruoli per garantire coerenza centrale con adattabilità locale, processi scalabili e strumenti avanzati per l'efficienza operativa. Ho creato un framework di budget e una roadmap di roll‑out per esecuzione puntuale e costo‑efficace. L'allineamento tra persone, processi e asset ha aumentato awareness, conversione e loyalty.",
        image: "https://images.unsplash.com/photo-1498804103079-a6351b050096?q=80&w=1600&auto=format&fit=crop",
        link: "#",
        tags: ["Influencer", "Governance", "Automation", "E‑commerce"]
      }
    ];

    // ======= RENDER MOSAICO =======
    const grid = document.getElementById('mosaic');
    function renderGrid(){
      grid.innerHTML = '';
      projects.forEach((p, i)=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.id = `p-${i}`;
        card.innerHTML = `
          <img src="${p.image}" alt="${p.title}" data-idx="${i}" />
          <div class="body">
            <h3>${p.title}</h3>
            <div style="color:var(--muted); font-size:14px">${p.desc}</div>
            <div class="meta">${p.tags.map(t=>`<span class=\"tag\">${t}</span>`).join('')}</div>
            <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
              <a class="btn ghost" href="#slides" data-show-slide="${i}">Dettagli</a>
            </div>
          </div>`;
        grid.appendChild(card);
      });
    }

    // Lightbox & navigazione a slideshow
    const lightbox = document.getElementById('lightbox');
    const lightImg = document.getElementById('lightImg');
    grid.addEventListener('click', (e)=>{
      const img = e.target.closest('img');
      if(img){
        lightImg.src = img.src;
        lightbox.classList.add('open');
        return;
      }
      const showBtn = e.target.closest('[data-show-slide]');
      if(showBtn){
        const i = parseInt(showBtn.getAttribute('data-show-slide'),10);
        if(!Number.isNaN(i)){
          idx = i;
          setView('slides');
          renderSlide();
          document.getElementById('slides').scrollIntoView({behavior:'smooth', block:'start'});
        }
      }
    });
    lightbox.addEventListener('click', ()=> lightbox.classList.remove('open'));

    // ======= SLIDESHOW =======
    const slidesEl = document.getElementById('slides');
    const slideImage = document.getElementById('slideImage');
    const slideTitle = document.getElementById('slideTitle');
    const slideDesc = document.getElementById('slideDesc');
    let idx = 0;

    function renderSlide(){
      const p = projects[idx];
      slideImage.src = p.image; slideImage.alt = p.title;
      slideTitle.textContent = p.title;
      slideDesc.textContent = p.full; // testo completo nello slideshow (ITA)
    }

    document.getElementById('prev').onclick = ()=>{ idx = (idx - 1 + projects.length) % projects.length; renderSlide(); };
    document.getElementById('next').onclick = ()=>{ idx = (idx + 1) % projects.length; renderSlide(); };

    // ======= TOGGLE VISTE =======
    const mosaicBtn = document.getElementById('mosaicBtn');
    const slideBtn = document.getElementById('slideBtn');
    const mosaic = document.getElementById('mosaic');
    function setView(view){
      const isMosaic = view === 'mosaic';
      mosaic.style.display = isMosaic ? 'grid' : 'none';
      slidesEl.classList.toggle('active', !isMosaic);
      mosaicBtn.classList.toggle('active', isMosaic);
      mosaicBtn.setAttribute('aria-selected', isMosaic);
      slideBtn.classList.toggle('active', !isMosaic);
      slideBtn.setAttribute('aria-selected', !isMosaic);
      if(!isMosaic) renderSlide();
    }
    mosaicBtn.onclick = ()=> setView('mosaic');
    slideBtn.onclick = ()=> setView('slides');

    // ======= CONTATTI (dialog semplice) =======
    const contactBtn = document.getElementById('contactBtn');
    contactBtn.addEventListener('click', ()=>{
      alert('Contatti\n\nEmail: ferrulli.walter@gmail.com\nLinkedIn: https://www.linkedin.com/in/walter-ferrulli/');
    });

    // ======= INIT =======
    document.getElementById('year').textContent = new Date().getFullYear();
    renderGrid();
    setView('mosaic');

    // ======= SELF-TEST (asserzioni extra) =======
    (function selfTest(){
      try{
        console.assert(typeof renderGrid === 'function', 'renderGrid deve esistere');
        console.assert(document.querySelectorAll('.card').length === projects.length, 'Il mosaico deve avere tante card quanti sono i progetti');
        // tag specifici richiesti
        console.assert(projects[0].tags.includes('Customer Analytics'), 'Il progetto 0 deve includere Customer Analytics');
        console.assert(projects[1].tags.includes('Location Intelligence'), 'Il progetto 1 deve includere Location Intelligence');
        console.assert(!projects[1].tags.includes('Location'), 'Il progetto 1 non deve includere la keyword "Location" semplice');
        // avatar immagine
        const av = document.querySelector('img.avatar');
        console.assert(av && av.getAttribute('src') === 'image_1.jpg', 'L\'avatar deve essere image_1.jpg');
        // Simula click su "Dettagli" del primo progetto
        const firstBtn = document.querySelector('[data-show-slide="0"]');
        if(firstBtn){
          firstBtn.click();
          console.assert(document.getElementById('slideTitle').textContent === projects[0].title, 'Click Dettagli (0) deve aprire lo slideshow sul progetto 0');
        }
        // Torna a mosaico
        setView('mosaic');
      }catch(err){
        console.error('Self-test fallito:', err);
      }
    })();
  </script>
</body>
</html>
